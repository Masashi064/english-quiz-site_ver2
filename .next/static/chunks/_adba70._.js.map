{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/mkawa/myproject/english-quiz-site/app/signup/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  updateProfile,\r\n  setPersistence,\r\n  browserLocalPersistence,\r\n} from 'firebase/auth';\r\nimport { auth, db } from '@/lib/firebase';\r\nimport { doc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { signInWithGoogle } from '@/lib/firebase';\r\n\r\nexport default function SignUpPage() {\r\n  const router = useRouter();\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [confirm, setConfirm] = useState('');\r\n  const [nickname, setNickname] = useState('user');\r\n  const [error, setError] = useState('');\r\n  const [showEmailForm, setShowEmailForm] = useState(false);\r\n\r\n  const handleSignUp = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (password !== confirm) {\r\n      setError('Passwords do not match');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await setPersistence(auth, browserLocalPersistence);\r\n\r\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n      const user = userCredential.user;\r\n\r\n      if (nickname) {\r\n        await updateProfile(user, { displayName: nickname });\r\n      }\r\n\r\n      await setDoc(doc(db, 'users', user.uid), {\r\n        uid: user.uid,\r\n        email: user.email,\r\n        nickname: nickname || '',\r\n        createdAt: serverTimestamp(),\r\n        level: '',\r\n        goal: '',\r\n      });\r\n\r\n      router.push('/');\r\n    } catch (err: any) {\r\n      setError(err.message || 'Signup failed');\r\n    }\r\n  };\r\n\r\n  const handleGoogleSignIn = async () => {\r\n    try {\r\n      await setPersistence(auth, browserLocalPersistence);\r\n      const result = await signInWithGoogle();\r\n      const user = result.user;\r\n\r\n      const userDocRef = doc(db, 'users', user.uid);\r\n      await setDoc(userDocRef, {\r\n        uid: user.uid,\r\n        email: user.email,\r\n        nickname: user.displayName || '',\r\n        createdAt: serverTimestamp(),\r\n        level: '',\r\n        goal: '',\r\n      }, { merge: true });\r\n\r\n      router.push('/');\r\n    } catch (err: any) {\r\n      setError(err.message || 'Google sign-in failed');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen items-center justify-center bg-gray-100 dark:bg-gray-900 px-4\">\r\n      <div className=\"w-full max-w-md bg-white dark:bg-gray-800 shadow-md rounded-lg p-8\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center\">\r\n          Create an Account\r\n        </h2>\r\n\r\n        {error && <p className=\"text-red-500 text-sm text-center mb-4\">{error}</p>}\r\n\r\n        {!showEmailForm && (\r\n          <>\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleGoogleSignIn}\r\n              className=\"w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded bg-white hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 font-semibold text-gray-700 dark:text-white shadow-sm\"\r\n            >\r\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 533.5 544.3\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M533.5 278.4c0-17.4-1.5-34.1-4.3-50.4H272v95.3h146.9c-6.4 34.3-25.2 63.4-53.6 82.9v68h86.7c50.7-46.7 81.5-115.4 81.5-195.8z\" fill=\"#4285f4\" />\r\n                <path d=\"M272 544.3c72.6 0 133.5-24.1 178-65.3l-86.7-68c-24.1 16.2-54.8 25.6-91.3 25.6-70.2 0-129.7-47.4-150.9-111.2h-89.2v69.9c44.3 88.2 135.2 149 239.8 149z\" fill=\"#34a853\" />\r\n                <path d=\"M121.1 325.4c-10.4-30.7-10.4-63.9 0-94.6v-69.9h-89.2c-29.3 58.6-29.3 127.1 0 185.7l89.2-69.9z\" fill=\"#fbbc04\" />\r\n                <path d=\"M272 107.7c39.5-.6 77.6 13.9 107 40.5l80.1-80.1C409.4 24.1 348.1-.5 272 0 168.5 0 77.5 60.8 33.2 149l89.2 69.9c21.1-63.8 80.6-111.2 150.9-111.2z\" fill=\"#ea4335\" />\r\n              </svg>\r\n              Sign in with Google\r\n            </button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowEmailForm(true)}\r\n              className=\"w-full mt-4 py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded font-semibold\"\r\n            >\r\n              Sign in with Email\r\n            </button>\r\n          </>\r\n        )}\r\n\r\n        {showEmailForm && (\r\n          <form className=\"space-y-4 mt-6\" onSubmit={handleSignUp}>\r\n            <div>\r\n              <label className=\"block text-sm text-gray-700 dark:text-gray-200\">\r\n                Nickname (optional)\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={nickname}\r\n                onChange={(e) => setNickname(e.target.value)}\r\n                className=\"w-full px-3 py-2 border rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm text-gray-700 dark:text-gray-200\">\r\n                Email <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                required\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                className=\"w-full px-3 py-2 border rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm text-gray-700 dark:text-gray-200\">\r\n                Password <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                required\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                className=\"w-full px-3 py-2 border rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm text-gray-700 dark:text-gray-200\">\r\n                Confirm Password <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                required\r\n                value={confirm}\r\n                onChange={(e) => setConfirm(e.target.value)}\r\n                className=\"w-full px-3 py-2 border rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white rounded font-semibold\"\r\n            >\r\n              Sign Up\r\n            </button>\r\n          </form>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAMA;AACA;AAPA;AAAA;AAAA;AAAA;AAOA;;;AAXA;;;;;;;AAce,SAAS;;IACtB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnD,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QAET,IAAI,aAAa,SAAS;YACxB,SAAS;YACT;QACF;QAEA,IAAI;YACF,MAAM,CAAA,GAAA,oNAAA,CAAA,iBAAc,AAAD,EAAE,kHAAA,CAAA,OAAI,EAAE,6NAAA,CAAA,0BAAuB;YAElD,MAAM,iBAAiB,MAAM,CAAA,GAAA,qOAAA,CAAA,iCAA8B,AAAD,EAAE,kHAAA,CAAA,OAAI,EAAE,OAAO;YACzE,MAAM,OAAO,eAAe,IAAI;YAEhC,IAAI,UAAU;gBACZ,MAAM,CAAA,GAAA,oNAAA,CAAA,gBAAa,AAAD,EAAE,MAAM;oBAAE,aAAa;gBAAS;YACpD;YAEA,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,MAAG,AAAD,EAAE,kHAAA,CAAA,KAAE,EAAE,SAAS,KAAK,GAAG,GAAG;gBACvC,KAAK,KAAK,GAAG;gBACb,OAAO,KAAK,KAAK;gBACjB,UAAU,YAAY;gBACtB,WAAW,CAAA,GAAA,sKAAA,CAAA,kBAAe,AAAD;gBACzB,OAAO;gBACP,MAAM;YACR;YAEA,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;QAC1B;IACF;IAEA,MAAM,qBAAqB;QACzB,IAAI;YACF,MAAM,CAAA,GAAA,oNAAA,CAAA,iBAAc,AAAD,EAAE,kHAAA,CAAA,OAAI,EAAE,6NAAA,CAAA,0BAAuB;YAClD,MAAM,SAAS,MAAM,CAAA,GAAA,kHAAA,CAAA,mBAAgB,AAAD;YACpC,MAAM,OAAO,OAAO,IAAI;YAExB,MAAM,aAAa,CAAA,GAAA,sKAAA,CAAA,MAAG,AAAD,EAAE,kHAAA,CAAA,KAAE,EAAE,SAAS,KAAK,GAAG;YAC5C,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE,YAAY;gBACvB,KAAK,KAAK,GAAG;gBACb,OAAO,KAAK,KAAK;gBACjB,UAAU,KAAK,WAAW,IAAI;gBAC9B,WAAW,CAAA,GAAA,sKAAA,CAAA,kBAAe,AAAD;gBACzB,OAAO;gBACP,MAAM;YACR,GAAG;gBAAE,OAAO;YAAK;YAEjB,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;QAC1B;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAoE;;;;;;gBAIjF,uBAAS,6LAAC;oBAAE,WAAU;8BAAyC;;;;;;gBAE/D,CAAC,+BACA;;sCACE,6LAAC;4BACC,MAAK;4BACL,SAAS;4BACT,WAAU;;8CAEV,6LAAC;oCAAI,WAAU;oCAAU,SAAQ;oCAAkB,OAAM;;sDACvD,6LAAC;4CAAK,GAAE;4CAA8H,MAAK;;;;;;sDAC3I,6LAAC;4CAAK,GAAE;4CAAwJ,MAAK;;;;;;sDACrK,6LAAC;4CAAK,GAAE;4CAAgG,MAAK;;;;;;sDAC7G,6LAAC;4CAAK,GAAE;4CAAmJ,MAAK;;;;;;;;;;;;gCAC5J;;;;;;;sCAIR,6LAAC;4BACC,MAAK;4BACL,SAAS,IAAM,iBAAiB;4BAChC,WAAU;sCACX;;;;;;;;gBAMJ,+BACC,6LAAC;oBAAK,WAAU;oBAAiB,UAAU;;sCACzC,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;8CAAiD;;;;;;8CAGlE,6LAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,WAAU;;;;;;;;;;;;sCAId,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;;wCAAiD;sDAC1D,6LAAC;4CAAK,WAAU;sDAAe;;;;;;;;;;;;8CAEvC,6LAAC;oCACC,MAAK;oCACL,QAAQ;oCACR,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,WAAU;;;;;;;;;;;;sCAId,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;;wCAAiD;sDACvD,6LAAC;4CAAK,WAAU;sDAAe;;;;;;;;;;;;8CAE1C,6LAAC;oCACC,MAAK;oCACL,QAAQ;oCACR,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,WAAU;;;;;;;;;;;;sCAId,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;;wCAAiD;sDAC/C,6LAAC;4CAAK,WAAU;sDAAe;;;;;;;;;;;;8CAElD,6LAAC;oCACC,MAAK;oCACL,QAAQ;oCACR,OAAO;oCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;oCAC1C,WAAU;;;;;;;;;;;;sCAId,6LAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAQb;GArKwB;;QACP,qIAAA,CAAA,YAAS;;;KADF"}},
    {"offset": {"line": 358, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}